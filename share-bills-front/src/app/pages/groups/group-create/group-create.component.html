<div class="page">
    <div class="card">
        <h1 class="title">Create a group</h1>

        <app-form #f="appForm" [form]="form" [submitLabel]="loading ? 'Creatingâ€¦' : 'Create'" [loading]="loading"
            [cancelLabel]="'Reset'" (formSubmit)="onSubmit($event)">
            <app-input-field label="Name" type="text" [required]="true" [submitted]="f.submitted"
                [placeholder]="'Enter group name'" [value]="form.controls.name.value"
                (valueChange)="onInputString('name', $event)"></app-input-field>

            <div class="currency-field">
                <label class="currency-label">Currency *</label>
                <select class="currency-select" 
                        [value]="form.controls.baseCurrencyCode.value"
                        (change)="onCurrencyChange($any($event.target).value)"
                        [class.error]="f.submitted && form.controls.baseCurrencyCode.invalid">
                    <option *ngFor="let currency of currencyOptions" [value]="currency.code">
                        {{ currency.name }}
                    </option>
                </select>
                <small class="currency-hint">Select the primary currency for this group</small>
            </div>

            <app-image-uploader [emitOnSelect]="true" [disabled]="loading" accept="image/png,image/jpeg,image/webp"
                label="Avatar" (fileChange)="onCoverSelected($event)" (error)="onCoverError($event)">
            </app-image-uploader>
            <p class="error" *ngIf="error">{{ error }}</p>
        </app-form>
    </div>
</div>